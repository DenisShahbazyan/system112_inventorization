#:import ZBarCam kivy_garden.zbarcam.ZBarCam
#:import ZBarSymbol pyzbar.pyzbar.ZBarSymbol


<LoginScreen>:
    input_login: input_login
    input_password: input_password
    label_error: label_error

    MDAnchorLayout:
        canvas:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos: self.pos
                size: self.size
        MDBoxLayout:
            spacing: 10

            orientation: 'vertical'
            size_hint: (0.75, 0.4)
            MDLabel:
                font_size: '20sp'
                text: 'Добро пожаловать!'
                halign: 'center'
            MDTextField:
                id: input_login
                hint_text: 'Логин'
            MDTextField:
                id: input_password
                hint_text: 'Пароль'
                password: True
            MDRectangleFlatButton:
                text: 'Войти'
                pos_hint: {"center_x": 0.5, "center_y": 0.3}
                on_release: root.sign_in()
            MDLabel:
                id: label_error
                font_size: '14sp'
                text: ''
                color: (1, 0, 0, 1)
                halign: 'center'


<MenuScreen>:
    zbarcam: zbarcam
    qrfield: qrfield

    BoxLayout:
        orientation: 'vertical'
        MDTabs:

            Tab:
                title: 'Сканировать'
                content_text: f"This is an example text for {self.title}"
                ZBarCam:
                    id: zbarcam
                    code_types: ZBarSymbol.QRCODE, ZBarSymbol.EAN13
                    pos_hint: {'center_x': 0.5, 'center_y': 0.75}
                    size_hint: [1, 0.5]
                MDTextField:
                    id: qrfield
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    text: ', '.join([str(symbol.data) for symbol in zbarcam.symbols])
                    on_text: root.scan(self.text)

            Tab:
                title: 'Добавить'
                content_text: f"This is an example text for {self.title}"

            Tab:
                title: 'Список'
                content_text: f"This is an example text for {self.title}"

            Tab:
                title: 'Генерировать'
                content_text: f"This is an example text for {self.title}"

        # TabbedPanel:
        #     do_default_tab: False

        #     TabbedPanelItem:
        #         text: 'Сканировать'


        #         # BoxLayout:
        #         #     orientation: 'vertical'

        #         #     ZBarCam:
        #         #         id: zbarcam
        #         #         code_types: ZBarSymbol.QRCODE, ZBarSymbol.EAN13
        #         #     MyTextInput:
        #         #         text: ', '.join([str(symbol.data) for symbol in zbarcam.symbols])

        #     TabbedPanelItem:
        #         text: 'Добавить'

        #     TabbedPanelItem:
        #         text: 'Список'
